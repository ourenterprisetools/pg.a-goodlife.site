<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NEWS</title>
    <link rel="icon" href="assets/oficial.png" type="image/png" />

    <!-- TikTok Pixel Code Start -->
    <script>
      !(function (w, d, t) {
        w.TiktokAnalyticsObject = t;
        var ttq = (w[t] = w[t] || []);
        (ttq.methods = [
          "page",
          "track",
          "identify",
          "instances",
          "debug",
          "on",
          "off",
          "once",
          "ready",
          "alias",
          "group",
          "enableCookie",
          "disableCookie",
          "holdConsent",
          "revokeConsent",
          "grantConsent",
        ]),
          (ttq.setAndDefer = function (t, e) {
            t[e] = function () {
              t.push([e].concat(Array.prototype.slice.call(arguments, 0)));
            };
          });
        for (var i = 0; i < ttq.methods.length; i++)
          ttq.setAndDefer(ttq, ttq.methods[i]);
        (ttq.instance = function (t) {
          for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)
            ttq.setAndDefer(e, ttq.methods[n]);
          return e;
        }),
          (ttq.load = function (e, n) {
            var r = "https://analytics.tiktok.com/i18n/pixel/events.js",
              o = n && n.partner;
            (ttq._i = ttq._i || {}),
              (ttq._i[e] = []),
              (ttq._i[e]._u = r),
              (ttq._t = ttq._t || {}),
              (ttq._t[e] = +new Date()),
              (ttq._o = ttq._o || {}),
              (ttq._o[e] = n || {});
            n = document.createElement("script");
            (n.type = "text/javascript"),
              (n.async = !0),
              (n.src = r + "?sdkid=" + e + "&lib=" + t);
            e = document.getElementsByTagName("script")[0];
            e.parentNode.insertBefore(n, e);
          });

        ttq.load("CVQQ61JC77U9PG5I1BS0");
        ttq.page();
      })(window, document, "ttq");
    </script>
    <!-- TikTok Pixel Code End -->

    <!-- ─── Converte-ai Preloads ─────────────────────────────────────────── -->
    <link
      rel="preload"
      href="https://scripts.converteai.net/dc2bee22-f6b3-41ae-b28c-3a61aaac8be4/ab-test/683ce2e780416ac5a176a125/player.js"
      as="script"
    />
    <link
      rel="preload"
      href="https://scripts.converteai.net/lib/js/smartplayer/v1/smartplayer.min.js"
      as="script"
    />
    <link rel="dns-prefetch" href="https://cdn.converteai.net" />
    <link rel="dns-prefetch" href="https://scripts.converteai.net" />
    <link rel="dns-prefetch" href="https://images.converteai.net" />
    <link rel="dns-prefetch" href="https://api.vturb.com.br" />

    <!-- ─── Stylesheets ──────────────────────────────────────────────────── -->
    <link rel="stylesheet" href="css/style-btn.css" />
    <link rel="stylesheet" href="css/style-main.css" />
  </head>

  <body>
    <div class="header-bar">LATEST NEWS</div>
    <div class="headline">
      <h1>
        Doctor Reveals<br />
        "Strange Ritual" that <strong>REVERSES</strong><br />
        type 2 diabetes
      </h1>
      <div style="text-align: center; margin-top: 1rem; font-size: 15px">
        <strong>By Doctor Yumi </strong><br />
        Publication date:
        <script>
          document.write(
            new Date(Date.now() - 86400000).toLocaleDateString("en-US")
          );
        </script>
      </div>
    </div>

    <!-- ╭──────────────────────────────────────────────────────────╮ -->
    <!-- │  PLAYER CONVERTE-AI                                     │ -->
    <!-- ╰──────────────────────────────────────────────────────────╯ -->
    <script type="text/javascript" id="scr_683ce2e780416ac5a176a125">
      var s = document.createElement("script");
      s.src =
        "https://scripts.converteai.net/dc2bee22-f6b3-41ae-b28c-3a61aaac8be4/ab-test/683ce2e780416ac5a176a125/player.js";
      s.async = true;
      document.head.appendChild(s);
    </script>

    <!-- ╭──────────────────────────────────────────────────────────╮ -->
    <!-- │  MAGIC GIFT BOXES – HIDDEN UNTIL PITCH VIEW             │ -->
    <!-- ╰──────────────────────────────────────────────────────────╯ -->
    <section id="gifts" class="display-on-pitch">
      <div class="gift-options">
        <div
          class="gift-header"
          style="text-align: center; margin-bottom: 1.5rem"
        >
          <h2 style="font-size: 2rem; color: #730000; margin-bottom: 0.5rem">
            Choose a Magic Box!
          </h2>
          <p style="font-size: 1.15rem; color: #000000; margin-bottom: 0.5rem">
            Tap a box bellow to win a surprise:
            <span style="color: #27ae60; font-weight: bold">21$</span>,
            <span style="color: #27ae60; font-weight: bold">360$</span>,
            <span style="color: #27ae60; font-weight: 800">780$</span>
            discount, or even a
            <span style="color: #e74c3c; font-weight: bold">FREE GIFT</span>!
          </p>
        </div>
        <div class="columns">
          <div class="column">
            <figure class="gift-box">
              <img
                class="gift-box-box"
                src="images/gift-box.png"
                width="300"
                height="298"
                alt="gift-box"
              />
            </figure>
          </div>
          <div class="column">
            <figure class="gift-box">
              <img
                class="gift-box-box"
                src="images/gift-box.png"
                width="300"
                height="298"
                alt="gift-box"
              />
            </figure>
          </div>
          <div class="column">
            <figure class="gift-box">
              <img
                class="gift-box-box"
                src="images/gift-box.png"
                width="300"
                height="298"
                alt="gift-box"
              />
            </figure>
          </div>
          <div class="column">
            <figure class="gift-box">
              <img
                class="gift-box-box"
                src="images/gift-box.png"
                width="300"
                height="298"
                alt="gift-box"
              />
            </figure>
          </div>
        </div>
      </div>

      <div class="gift-open" style="display: none">
        <h2>CONGRATULATIONS!</h2>
        <img
          src="images/gift-box-top.png"
          width="300"
          height="196"
          alt="prize"
          class="box-top"
        />
        <img
          src="images/prize.png"
          width="800"
          height="328"
          alt="prize"
          class="prize"
        />
        <img
          src="images/gift-box-bottom.png"
          width="300"
          height="196"
          alt="prize"
          class="box-bottom"
        />

        <a href="https://track.onebetter-life.site/click">
          <img
            src="images/btn-get-free.png"
            width="497"
            height="111"
            style="max-width: 100%; height: auto"
          />
        </a>
        <!-- <p class="valued-discount">
          <strong>You<span> SAVED </span> <strike>780$</strike> </strong>
        </p> -->
        <div class="timer-box">
          <p>
            This prize expires in
            <span id="timer" style="color: red; font-weight: bold">4:49</span>
          </p>
        </div>
      </div>
    </section>

    <!-- ╭──────────────────────────────────────────────────────────╮ -->
    <!-- │  JS – LINK REAJU   + GIFT LOGIC                         │ -->
    <!-- ╰──────────────────────────────────────────────────────────╯ -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        /* Captura href do CTA antigo e replica no novo botão */
        const oldBtn = document.querySelector(
          '#oldCta,.offer-button,.cta-btn,[href*="checkout" i]'
        );
        const href = oldBtn ? oldBtn.getAttribute("href") : "#";
        document
          .querySelectorAll("#gifts a.btn-a")
          .forEach((a) => a.setAttribute("href", href));

        /* Função para timer após abrir presente */
        const timerEl = document.getElementById("timer");
        function startGiftTimer(min, sec) {
          let total = min * 60 + sec;
          const int = setInterval(() => {
            if (total <= 0) {
              clearInterval(int);
              return;
            }
            total--;
            const mm = Math.floor(total / 60);
            const ss = String(total % 60).padStart(2, "0");
            timerEl.textContent = `${mm}:${ss}`;
          }, 1000);
        }

        /* Clique nas caixas */
        document.querySelectorAll("#gifts .gift-box").forEach((box) => {
          box.addEventListener(
            "click",
            () => {
              document.querySelector("#gifts .gift-options").style.display =
                "none";
              document.querySelector("#gifts .gift-open").style.display =
                "block";
              startGiftTimer(4, 49);
            },
            { once: true }
          );
        });
      });
    </script>

    <!-- ╭──────────────────────────────────────────────────────────╮ -->
    <!-- │  TRUST & FOOTER                                         │ -->
    <!-- ╰──────────────────────────────────────────────────────────╯ -->
    <div class="trusted-logos">
      <img src="assets/logo_news.webp" alt="Logo News" style="width: 60%"/>
    </div>
    <footer>
      <p>&copy; 2024. All rights reserved.</p>
      <p>
        This site is not part of TikTok, Inc. or TikTok.com, nor is it sponsored
        or endorsed by TikTok.<br />TikTok is a trademark of ByteDance, Ltd.
      </p>
      <p>
        Disclaimer: This site is provided for educational purposes only. Always
        consult a health professional before implementing any strategy discussed
        here.
      </p>
    </footer>

    <!-- BACK-REDIRECT clássico (igual ao que funcionava) -->
    <script>
      (function (window) {
        /* ─ util p/ ler cookie simples ─ */
        function getCookie(name) {
          const m = ("; " + document.cookie).match("; " + name + "=([^;]*)");
          return m ? m[1] : null;
        }

        /* grava o ID da campanha de origem logo no load */
        window.addEventListener("DOMContentLoaded", () => {
          const cmpId = getCookie("rtkcmpid-store"); // setado pelo script do RedTrack
          if (cmpId) localStorage.setItem("sourceCmp", cmpId); // guardamos p/ usar no redirect
        });

        /* ─ dispara quando o visitante pressiona “voltar” ─ */
        window.onpopstate = function () {
          if (sessionStorage.backRedirectDone) return; // evita loop
          sessionStorage.backRedirectDone = "1";

          /* URL final do CHECKOUT */
          const url = new URL(
            "https://sugarsweeptoday.com/dtc-bg/?aff_id=6291"
          );
          url.searchParams.set("utm_campaign", "{replace}"); // troque se quiser macro diferente
          url.searchParams.set("utm_source", "TikTok"); // agora é TikTok

          /* aproveita o MESMO clique do anúncio (campanha A) */
          const clickId = getCookie("rtkclickid-store"); // ex.: 681d…
          const srcCmp = localStorage.getItem("sourceCmp"); // ex.: 681e0179…

          if (clickId) {
            url.searchParams.set("subid", clickId); // rede / BuyGoods
            url.searchParams.set("rtkcid", clickId); // RedTrack: mantém o mesmo click
            url.searchParams.set("clickid", clickId); // BuyGoods postback
          }
          if (srcCmp) url.searchParams.set("subid5", srcCmp); // campanha de origem

          window.location.href = url.toString();
        };

        /* adiciona a entrada fantasma p/ ‘Voltar’ acionar popstate */
        window.history.pushState({}, "", location.href);
      })(window);
    </script>

    <!-- ========== REDTRACK SCRIPT ========== -->

    <script src="https://track.onebetter-life.site/unilpclick.js?attribution=lastpaid&cookiedomain=a-goodlife.site&cookieduration=90&defaultcampaignid=680d8315562306975d39b98e&regviewonce=false"></script>

    <!-- ========== REDTRACK SCRIPT ========== -->

    <!-- ====== TRACKING – RedTrack (cookie)  x  ConverteAI ====== -->
    <script>
      (function () {
        /* ─── Utilidades ────────────────────────────────────────── */
        function getCookie(name) {
          const m = ("; " + document.cookie).match("; " + name + "=([^;]*)");
          return m ? m[1] : null;
        }
        const newEventId = () => Date.now().toString();

        /* ─── Dispara o postback ───────────────────────────────── */
        function track(type) {
          const clickId = getCookie("rtkclickid-store");
          if (!clickId) {
            console.warn(
              `RedTrack: cookie ausente – evento “${type}” NÃO enviado.`
            );
            return;
          }

          /* ★ Envia “VSL View” só 1x por clickID ----------------- */
          if (type === "VSL View") {
            const key = "vslView:" + clickId;
            if (localStorage.getItem(key)) {
              console.log("RedTrack: “VSL View” já enviado para esse clickid.");
              return;
            }
            localStorage.setItem(key, "1"); // marca que já enviou
          }
          /* ------------------------------------------------------ */

          const url =
            "https://track.onebetter-life.site/postback" +
            "?clickid=" +
            encodeURIComponent(clickId) +
            "&rdtk_event_id=" +
            encodeURIComponent(newEventId()) +
            "&type=" +
            encodeURIComponent(type);

          new Image().src = url;
          console.log("RedTrack: enviado →", type);
        }

        /* ─── Timer + UI do Pitch (inalterado) ─────────────────── */
        function startOfferTimer() {
          const els = document.querySelectorAll(".offer-timer-count");
          if (!els.length) return;

          let s = 1800;
          const int = setInterval(() => {
            const mm = String(Math.floor(s / 60)).padStart(2, "0");
            const ss = String(s % 60).padStart(2, "0");

            els.forEach((el) => (el.innerHTML = `<h1>${mm}:${ss}</h1>`));
            document
              .querySelectorAll(".offer-timer-count h1")
              .forEach(
                (h1) => (h1.textContent = `Oferta expira em ${mm}:${ss}`)
              );

            if (--s < 0) clearInterval(int);
          }, 1000);
        }

        function displayOnPitch() {
          startOfferTimer();
          document
            .querySelectorAll(".display-on-pitch")
            .forEach((el) => el.classList.remove("display-on-pitch"));
          document
            .querySelector(".scroll-on-pitch")
            ?.scrollIntoView({ behavior: "smooth" });
        }

        /* ─── VSL View: polling até 5 s pelo cookie ────────────── */
        window.addEventListener("DOMContentLoaded", () => {
          let tries = 0;
          const int = setInterval(() => {
            if (getCookie("rtkclickid-store")) {
              track("VSL View");
              clearInterval(int);
            } else if (++tries >= 17) {
              clearInterval(int);
              console.warn(
                "VSL View não disparado: cookie não apareceu em 5 s."
              );
            }
          }, 300);

          if (localStorage.getItem("pitchView") === "true") {
            displayOnPitch();
          }
        });

        /* ─── Mensagens do SmartPlayer ─────────────────────────── */
        window.addEventListener("message", (ev) => {
          switch (ev.data) {
            /* REMOVIDO: 'VSL View' duplicado */

            case "VSL - Lead View":
              track("VSL - Lead View");
              break;
            case "VSL - MicroLead View":
              track("VSL - MicroLead View");
              break;
            case "VSL - Play":
              track("VSL - Play");
              document
                .querySelectorAll(".hide-on-play")
                .forEach((el) => (el.style.display = "none"));
              break;

            case "VSL - 3 View":
              track("VSL - 3 View");
              break;
            case "VSL - 60 View":
              track("VSL - 60 View");
              break;
            case "VSL - 120 View":
              track("VSL - 120 View");
              break;
            case "VSL - 300 View":
              track("VSL - 300 View");
              break;

            case "VSL - Pitch View":
              localStorage.setItem("pitchView", "true");
              track("VSL - Pitch View");
              displayOnPitch();
              break;
          }
        });
      })();
    </script>
    <!-- ====== /TRACKING ======================================================= -->
  </body>
</html>
